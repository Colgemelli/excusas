üìã Sistema de Excusas y Permisos - Colegio Gemelli Franciscanos
üöÄ Instrucciones de Configuraci√≥n y Despliegue
üìÅ Estructura de Archivos
proyecto/
‚îú‚îÄ‚îÄ index.html          # Interfaz principal con formularios stepper
‚îú‚îÄ‚îÄ app.js             # L√≥gica de la aplicaci√≥n con stepper y validaciones
‚îú‚îÄ‚îÄ styles.css         # Estilos CSS con componentes stepper
‚îî‚îÄ‚îÄ README.md          # Este archivo
‚ú® Nuevas Caracter√≠sticas Implementadas
üéØ Formulario Stepper (Estilo Stepperize)
4 pasos para completar cada solicitud
Navegaci√≥n visual con indicadores de progreso
Validaci√≥n paso a paso antes de continuar
Secci√≥n de revisi√≥n antes del env√≠o final
Responsive design adaptado a m√≥viles
üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Informaci√≥n Completa del Acudiente
Nombre completo del acudiente
Correo electr√≥nico (nuevo campo obligatorio)
Tel√©fono de contacto
Perfil/relaci√≥n con el estudiante (Padre, Madre, Tutor, etc.)
N√∫mero de documento de identidad
Eliminado: Campo de "firma del padre" (reemplazado por datos completos)
üéì Base de Datos de Estudiantes
Estudiantes por grado preconfigurados
Selecci√≥n din√°mica cuando se elige el grado
Informaci√≥n del estudiante con c√≥digo y nombre completo
Validaci√≥n autom√°tica de estudiante seleccionado
üìÖ Validaci√≥n de Fechas Mejorada
Solo fechas futuras: Desde hoy en adelante
Validaci√≥n en tiempo real
Mensajes de error espec√≠ficos para fechas inv√°lidas
üõ†Ô∏è Configuraci√≥n Inicial
Opci√≥n 1: Desarrollo Local (Sin Supabase)
El sistema funciona inmediatamente con todas las nuevas caracter√≠sticas.
Las solicitudes se guardan en `localStorage` del navegador mientras Supabase no est√© disponible.
Si `localStorage` no est√° habilitado, los datos solo persisten durante la sesi√≥n actual.
Si la inicializaci√≥n de Supabase falla, `useLocal` se activa autom√°ticamente y se muestra una advertencia en la consola indicando este modo de respaldo.

Subir archivos a Netlify/GitHub Pages:
bash
git clone tu-repositorio
# Subir index.html, app.js, styles.css
Usuarios predefinidos para testing:
Coordinadores:
- Usuario: coord1 | Contrase√±a: coord123
- Usuario: directora | Contrase√±a: dir123

Docentes:
- Usuario: doc1 | Contrase√±a: doc123 (Grado: 5¬∞)
- Usuario: doc2 | Contrase√±a: doc123 (Grado: 8¬∞)
- Usuario: doc3 | Contrase√±a: doc123 (Grado: 11¬∞)

Administrador:
- Usuario: admin | Contrase√±a: admin123
Estudiantes de ejemplo por grado:
Preescolar: Ana Sof√≠a P√©rez, Carlos Andr√©s L√≥pez, etc.
1¬∞ a 11¬∞: 5 estudiantes por grado con c√≥digos √∫nicos
Carga autom√°tica al seleccionar grado
Opci√≥n 2: Producci√≥n con Supabase
1. Crear Proyecto en Supabase
Ve a supabase.com
Crea una cuenta y nuevo proyecto
Anota tu Project URL y anon public key
2. Configurar Base de Datos
Ejecuta el script SQL completo que est√° en el artifact "Tablas SQL para Supabase":

sql
-- Ejecutar todo el contenido del archivo SQL en el Query Editor de Supabase
-- Esto crear√° todas las tablas, pol√≠ticas y datos iniciales
Luego, ejecuta el archivo `docs/views.sql` para crear las vistas
`vista_estudiantes_grados`, `vista_usuarios_completa` y
`vista_solicitudes_completas`.
3. Configurar Pol√≠ticas RLS
sql
-- Pol√≠tica simple para desarrollo
CREATE POLICY "usuarios_autenticados_ven_solicitudes" ON solicitudes
    FOR SELECT USING (auth.role() = 'authenticated');

CREATE POLICY "crear_solicitudes_publico" ON solicitudes
    FOR INSERT WITH CHECK (true);
4. Actualizar Configuraci√≥n en app.js
javascript
const SUPABASE_CONFIG = {
    url: 'https://tu-proyecto.supabase.co',
    key: 'tu-clave-anonima-aqui',
    useLocal: false  // Cambiar a false para usar Supabase
};
5. Poblar Base de Datos de Estudiantes
sql
-- Insertar estudiantes en la tabla correspondiente
-- (Script incluido en el archivo SQL completo)
üé® Flujo del Formulario Stepper
üìù Excusas (4 Pasos):
üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Acudiente: Informaci√≥n personal completa
üéì Estudiante: Selecci√≥n de grado y estudiante
üìã Excusa: Fechas, motivo, documentos adjuntos
‚úÖ Confirmaci√≥n: Revisi√≥n antes de enviar
üïê Permisos (4 Pasos):
üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Acudiente: Informaci√≥n personal completa
üéì Estudiante: Selecci√≥n de grado y estudiante
‚è∞ Permiso: Fechas, horarios, tipo de permiso
‚úÖ Confirmaci√≥n: Revisi√≥n antes de enviar
‚úÖ Validaciones Implementadas
üîç Validaci√≥n por Pasos:
Paso 1: Email v√°lido, campos obligatorios completos
Paso 2: Grado y estudiante seleccionados
Paso 3: Fechas futuras, campos espec√≠ficos del tipo
Paso 4: Revisi√≥n final de todos los datos
üìÖ Validaci√≥n de Fechas:
Fecha m√≠nima: Hoy (no fechas pasadas)
Validaci√≥n autom√°tica al cambiar fecha
Mensajes de error espec√≠ficos
üë• Validaci√≥n de Estudiantes:
Carga din√°mica por grado seleccionado
Informaci√≥n autom√°tica del estudiante
C√≥digos √∫nicos por estudiante
üîê Pol√≠tica de Protecci√≥n de Datos Actualizada
‚úÖ Caracter√≠sticas Mejoradas:
Identificaci√≥n completa del Colegio Gemelli
Finalidades espec√≠ficas del sistema
Derechos detallados del titular
Contacto Habeas Data: habeasdata@colegiosfranciscanos.com
Doble validaci√≥n obligatoria
üì± Dise√±o Responsive
üñ•Ô∏è Desktop:
Stepper horizontal con conectores
Formulario de 2 columnas
Navegaci√≥n lateral
üì± M√≥vil:
Stepper vertical tipo cards
Formulario de 1 columna
Botones full-width
Touch-friendly navigation
üêõ Soluci√≥n de Problemas
Error: Estudiantes no cargan
Verificar selecci√≥n de grado
Revisar console del navegador
Verificar estructura de datos
Error: Fechas no v√°lidas
Comprobar configuraci√≥n de fecha m√≠nima
Verificar formato de fecha del navegador
Error: Stepper no navega
Verificar validaciones de cada paso
Revisar campos obligatorios
Comprobar mensajes de error
üéØ Funcionalidades del Stepper
‚è≠Ô∏è Navegaci√≥n:
Siguiente: Solo si el paso actual es v√°lido
Anterior: Siempre disponible (excepto paso 1)
Saltar pasos: No permitido sin validar
Indicadores visuales: Estados completado/activo/pendiente
üîÑ Auto-actualizaci√≥n:
Secci√≥n de revisi√≥n se actualiza autom√°ticamente
Informaci√≥n del estudiante aparece al seleccionar
Campos din√°micos seg√∫n tipo de solicitud
‚ú® Caracter√≠sticas Especiales:
Prevenci√≥n de env√≠o con Enter en campos intermedios
Validaci√≥n en tiempo real en campos cr√≠ticos
Estados visuales para campos v√°lidos/inv√°lidos
Mensajes de error contextuales por paso
üìä Datos de Ejemplo Incluidos
javascript
// Ejemplo de estudiantes por grado
'5¬∞': [
    { codigo: '5A001', nombre: 'Gabriela', apellidos: 'Molina Vargas' },
    { codigo: '5A002', nombre: 'Maximiliano', apellidos: 'Contreras Ruiz' },
    // ... m√°s estudiantes
]
üöÄ Pr√≥ximas Mejoras
 Integraci√≥n con sistema acad√©mico real
 Notificaciones push para padres
 Firma digital electr√≥nica
 Historial de solicitudes por estudiante
 Dashboard para padres de familia
¬© 2025 Sistema de Excusas y Permisos - Colegio Gemelli Franciscanos Formulario Stepper v2.0 con validaciones avanzadas

Usuarios en Producci√≥n
Los usuarios predefinidos tienen contrase√±as en texto plano para desarrollo. En producci√≥n:

Cambiar contrase√±as:
sql
UPDATE usuarios SET password_hash = 'nueva_contrase√±a_hash_bcrypt' 
WHERE usuario = 'admin';
Implementar hashing de contrase√±as:
En el c√≥digo JavaScript, usar una librer√≠a como bcrypt.js
Hashear contrase√±as antes de compararlas
Variables de Entorno
Define `SUPABASE_URL` y `SUPABASE_ANON_KEY` en tu entorno y ejecuta el script
de construcci√≥n para generar `env.js`.

```bash
SUPABASE_URL=tu-url SUPABASE_ANON_KEY=tu-clave ./build.sh
```
Reemplaza `tu-url` y `tu-clave` con los valores reales de tu proyecto cuando ejecutes `build.sh`.
Se incluye un archivo `env.example.js` como referencia.

El archivo `env.js` se carga antes de `app.js` y expone los valores mediante
`window.process.env`.
**Importante:** `env.js` no se incluye en el repositorio por contener credenciales.
Tras clonar el proyecto, generalo nuevamente ejecutando el script anterior.
üåê Despliegue
GitHub + Netlify (Recomendado)
Crear repositorio en GitHub:
bash
git init
git add .
git commit -m "Sistema de excusas inicial"
git remote add origin https://github.com/tu-usuario/sistema-excusas.git
git push -u origin main
Configurar Netlify:
Conectar repositorio de GitHub
Build command: (dejar vac√≠o)
Publish directory: (dejar vac√≠o o "/")
Configurar variables de entorno si usas Supabase
Vercel
Conectar repositorio de GitHub
Configurar variables de entorno
Deploy autom√°tico
Hosting tradicional
Subir archivos via FTP
Asegurarse de que el servidor soporte HTTPS
üìä Funcionalidades Implementadas
‚úÖ Para Padres de Familia (Sin Login)
Crear solicitudes de excusa
Crear solicitudes de permiso
Consultar estado por radicado
Modal de protecci√≥n de datos obligatorio
Generaci√≥n autom√°tica de radicados
Adjuntar documentos (certificados m√©dicos)
‚úÖ Para Coordinadores
Dashboard con estad√≠sticas
Aprobar/rechazar solicitudes
Ver todas las solicitudes
Agregar observaciones
Firma digital (aprobaci√≥n/rechazo)
‚úÖ Para Docentes
Ver solicitudes de su grado asignado
Validar solicitudes aprobadas
Dashboard simplificado
‚úÖ Para Administradores
Dashboard completo con m√©tricas
Estad√≠sticas por grado
Hist√≥rico mensual
Gesti√≥n completa del sistema
üîç Sistema de Permisos
javascript
// Permisos por rol
const permissions = {
    'coordinador': [
        'aprobar_solicitudes', 
        'rechazar_solicitudes', 
        'ver_dashboard', 
        'ver_todas_solicitudes'
    ],
    'docente': [
        'validar_solicitudes', 
        'asignar_trabajos', 
        'ver_estudiantes', 
        'ver_solicitudes_grado'
    ],
    'admin': [
        'ver_estadisticas', 
        'gestionar_usuarios', 
        'acceso_completo', 
        'ver_todas_solicitudes'
    ]
};
üêõ Troubleshooting
Error: "operator does not exist: text ->> unknown"
Usar las pol√≠ticas RLS simplificadas proporcionadas
La l√≥gica de permisos se maneja en JavaScript
Error de conexi√≥n a Supabase
Verificar URL y clave an√≥nima
Verificar configuraci√≥n de CORS en Supabase
Cambiar useLocal: true para desarrollo sin Supabase
Solicitudes no aparecen
Verificar pol√≠ticas RLS
Verificar permisos de usuario
Revisar console del navegador para errores
üì± Responsive Design
Optimizado para m√≥viles y tablets
Formularios adaptativos
Navegaci√≥n touch-friendly
üé® Personalizaci√≥n
Variables CSS en :root para f√°cil customizaci√≥n
Colores institucionales del Colegio Gemelli
Iconos Font Awesome incluidos
üìà Pr√≥ximas Mejoras
 Notificaciones por email
 Reportes en PDF
 Integraci√≥n con calendario escolar
 App m√≥vil con Capacitor
 Backup autom√°tico de datos
üÜò Soporte
Para soporte t√©cnico:

Revisar console del navegador
Verificar configuraci√≥n de Supabase
Consultar documentaci√≥n de Supabase
## Licencia

Este proyecto se distribuye bajo la licencia MIT. Consulta el archivo [LICENSE](LICENSE) para m√°s detalles.
